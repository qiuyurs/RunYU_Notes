---
title: Coze头像生成器开发实战
description: 详细介绍使用Coze平台实现姓氏头像生成器的逻辑配置，包含工作流搭建和模板设置
tags: [Coze, 头像生成器, AI应用开发, 工作流配置, 教程]
date: 2025-04-02T00:00:00Z
---

**实战开发coze应用-姓氏头像生成器（下）**


在上篇文章中，我们完成了"用户界面"的配置，下面我们就要进行头像生成的逻辑配置了

![](assets/image_8d1e7137.png)

选择页面逻辑-工作流的+号，新建工作流

![](assets/image_1a8f685c.png)

选择刚才新建的工作流

![](assets/image_5fb6b9fb.png)

点击开始节点

基础上设置，新增两个变量

变量名：xingshi、类型String 必填 用户的姓氏

变量名：tid、类型Integer 必填 用户选择的头像模板

然后添加一个大模型节点

![](assets/image_1b65d98f.png)

将开始节点连接到大模型节点

模型选择豆包·Lite即可

技能这里添加"必应搜索"

![](assets/image_715e45bf.png)

![](assets/image_f508b505.png)

系统提示词可以参考我这个，生成一个短语

+-----------------------------------------------------------------------------------------+
| 根据用户的问题，解析出以下信息：                                                        |
|                                                                                         |
| name：用户的姓氏                                                                        |
|                                                                                         |
| 谐音梗示例：                                                                            |
|                                                                                         |
| 马到成功 肖兔崽子 蔡貌双全 汪哪里跑                                                     |
|                                                                                         |
| dy：用户姓氏开头的谐音梗，需要以姓氏开头。有趣 幽默                                     |
| 网络热梗（不包含姓氏）2-4字。只返回梗，不要返回其他内容。示例：马到成功，只返回"到成功" |
|                                                                                         |
| 不要返回无关内容。                                                                      |
+-----------------------------------------------------------------------------------------+

用户提示词选择 input变量

![](assets/image_316a76dd.png)

输出格式选择"JSON"

并添加两个变量

name（姓氏）和dy（短语）

接下来添加一个 "选择器"节点

![](assets/image_90d6889d.png)

条件这里选择开始节点的tid变量

选择 "等于" ，值就是头像模板

比如值等于1 ，就进入生成头像模板 1的流程

下面添加 画板 节点

![](assets/image_13f77309.png)

连接到选择器

设置两个变量

xingshi和dy，选择大模型返回的变量值

![](assets/image_35810794.png)

接下来 编辑模板

![](assets/image_576ecca3.png)

上传头像模板

![](assets/image_b21b7856.png)

修改画板尺寸

![](assets/image_fafd01aa.png)

将背景图铺满屏幕并置底

![](assets/image_6d977c6c.png)

拖动变量，放在合适位置，调整颜色 大小 字体等

![](assets/image_d6668a30.png)

然后重复四次

将四个模板全部设置好

![](assets/image_82c6dca1.png)

我这里是为了演示，所以并没有微调，做出来可能会有点丑，见笑了

接下来添加变量聚合节点，将生成的图片返回到用户

![](assets/image_242df3ca.png)

![](assets/image_4871dee0.png)

将几个画板节点返回的值都添加进去

最后连接到"结束"节点，选择变量聚合的返回值

![](assets/image_0b296100.png)

至此，生成逻辑就完成了。

接下来，继续修改用户界面

添加一个新的页面，用户展示生成结果

![](assets/image_a3b55779.png)

添加一个图片组件和按钮

点击 返回首页 按钮

![](assets/image_3aeb658c.png)

在事件页面，新建事件，

类型-点击时

动作-页面跳转

页面类型-内部页面

选择页面-首页

![](assets/image_269ae840.png)

我们回到首页，点击"立即生成"按钮，选择"事件"页面

新建事件：

类型-点击时

动作-页面跳转

![](assets/image_2b4a80c4.png)

名称自定义，自己知道就行，一会要用

![](assets/image_d3d759ff.png)

入参选择输入和选择框

![](assets/image_2ba4933d.png)

![](assets/image_66d4e023.png)

不知道是哪的话可以点击左边的"结构"

![](assets/image_7f61fb71.png)

鼠标悬浮在图层上，可以看到右边会显示一个虚线框框告诉你在选择哪里

![](assets/image_0f8e6d6f.png)

接下来 点击图片2 的图片

选择-事件

新建一个事件，加载时调用工作流

![](assets/image_c2ae0796.png)

工作流参数选择页面入参传递的参数

![](assets/image_e736417e.png)

到此，即为搭建完成！

本章写的逻辑可能有些乱，还请见谅。有问题请留言。
